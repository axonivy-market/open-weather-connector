<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition template="/layouts/frame-10.xhtml">
		<ui:define name="title">WeatherForecast</ui:define>
		<ui:define name="content">
			<h3>Please enter the city name, country code and state code for which you'd like to
				retrieve the weather information.</h3>
			<h:form id="form">
				<p:messages />
				<p:panelGrid columns="2" layout="grid"
					styleClass="ui-panelgrid-blank ui-fluid"
					columnClasses="ui-g-12 ui-md-3 ui-lg-2, ui-g-12 ui-md-9 ui-lg-4, ui-g-12 ui-md-3 ui-lg-2, ui-g-12 ui-md-9 ui-lg-4">
					<p:outputLabel for="dataLCityName" value="City name" />
					<p:inputText id="dataLCityName"
						value="#{data.forecastWeather.location.cityName}"></p:inputText>
					<p:outputLabel for="dataCountryCode" value="Country code" />
					<p:inputText id="dataCountryCode"
						value="#{data.forecastWeather.location.countryCode}"></p:inputText>
					<p:outputLabel for="dataStateCode" value="State code" />
					<p:inputText id="dataStateCode"
						value="#{data.forecastWeather.location.stateCode}"></p:inputText>
				</p:panelGrid>
				<p:panelGrid columns="2" layout="grid"
					styleClass="ui-panelgrid-blank ui-fluid"
					columnClasses="ui-g-12 ui-md-3 ui-lg-2, ui-g-12 ui-md-9 ui-lg-4, ui-g-12 ui-md-3 ui-lg-2, ui-g-12 ui-md-9 ui-lg-4">
					<p:commandButton value="Get Weather" id="getWeatherButton"
						actionListener="#{logic.getWeather}" update="form" />
				</p:panelGrid>

				<p:dataTable id="theTable" widgetVar="theTable"
					rendered="#{data.forecastWeather.forecastWeatherResponse.list ne null}"
					value="#{data.forecastWeather.forecastWeatherResponse.list}"
					var="day" emptyMessage="Keine Daten verfügbar">
					<p:column headerText="Date">
						<h:outputText value="#{day.dayOfWeek}"
							style="font-weight: bold" />
						<br />
						<h:outputText
							value="#{day.daytime}" />
					</p:column>
					<p:column headerText="Weather">
						<h:outputText
							value="Temp: #{day.mainTemp} °C" />
						<br />
						<h:outputText
							value="Feels like: #{day.mainFeelsLike} °C" />
					</p:column>
					<p:column headerText="">
						<table style="align: left">
							<tr>
								<td rowspan="1"
									style="text-align: right; width: 60px; padding: 0px; border: none;">
									<h:graphicImage
										value="https://openweathermap.org/img/wn/#{day.weatherIcon}.png"
										width="60" height="60" />
								</td>
								<td rowspan="1" style="text-align: right; width: 60px; padding: 0px; border: none;">
									<h:outputText
										value="#{day.weatherDescription}" />
								</td>
							</tr>
						</table>
					</p:column>
				</p:dataTable>
				<br />
				<div id="openweathermap-widget-11"></div>
<script src='//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js'></script><script>window.myWidgetParam ? window.myWidgetParam : window.myWidgetParam = [];  window.myWidgetParam.push({id: 11,cityid: '2643743',appid: '536ab120c8d59f5249e91d759e1392c9',units: 'imperial',containerid: 'openweathermap-widget-11',  });  (function() {var script = document.createElement('script');script.async = true;script.charset = "utf-8";script.src = "//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script, s);  })();</script>
				<div class="command-btns">
					<p:commandLink id="cancel"
						actionListener="#{ivyWorkflowView.cancel()}" value="Cancel" />
					<p:commandButton id="proceed" actionListener="#{logic.close}"
						value="Proceed" update="form" icon="pi pi-check" />
				</div>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>

</html>